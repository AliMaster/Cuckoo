<div class="page-content cuckoo">
  <div class="wrapper">
    <div class="home">
      <ul class="post-list">
        {% for p in posts %}
        <div class="post-items">
          <li>
            <p>
              <span class="post-time">{{ p.dateGTM }}</span> -
              <a href="{{ p.url }}" class="post-link">{{ p.title }}</a>
            </p>
          </li>
        </div>
        {% /for %}
      </ul>
    </div>
  </div>
</div>

<script src="asset/jquery-3.3.1.min.js"></script>

<script>

  function parseTime(time, cFormat) {
    if (arguments.length === 0) {
      return null
    }
    const format = cFormat || '{y}-{m}-{d} {h}:{i}:{s}'
    let date
    if (typeof time === 'object') {
      date = time
    } else {
      if (('' + time).length === 10) time = parseInt(time) * 1000
      date = new Date(time)
    }
    const formatObj = {
      y: date.getFullYear(),
      m: date.getMonth() + 1,
      d: date.getDate(),
      h: date.getHours(),
      i: date.getMinutes(),
      s: date.getSeconds(),
      a: date.getDay()
    }
    const time_str = format.replace(/{(y|m|d|h|i|s|a)+}/g, (result, key) => {
      let value = formatObj[key]
      if (key === 'a') return ['一', '二', '三', '四', '五', '六', '日'][value - 1]
      if (result.length > 0 && value < 10) {
        value = '0' + value
      }
      return value || 0
    })
    return time_str
  }

  let originTime = document.querySelector('.post-time').innerText
  document.querySelector('.post-time').innerText = parseTime(Date.parse(originTime))
  console.log(parseTime(Date.parse(originTime)))

  {% for p in posts %}
    document.querySelector('.post-time').innerText = parseTime(Date.parse("{{ p.dateGTM }}"))
  {% /for %}

</script>
